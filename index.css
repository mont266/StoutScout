@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    /* Prevent horizontal scrollbars which can cause unwanted white space */
    overflow-x: hidden;
  }

  body {
    @apply bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white font-sans antialiased;
    /* Prevent the browser's native pull-to-refresh action */
    overscroll-behavior-y: contain;
    /* Add padding for device notches and system UI (status bar, home indicator) */
    padding-top: env(safe-area-inset-top);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

@layer components {
  /* This class is used in MobileLayout.jsx to add padding for the home indicator */
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /*
    Adds top padding to the header ONLY on the native Android app.
    This provides a specific fix to prevent the app content from
    drawing behind the system status bar on Android devices.
  */
  .native-android .app-header {
    padding-top: 1rem; /* 16px, reduced padding for Android status bar */
  }

  /*
    Adds bottom padding to elements needing safe area adjustment
    ONLY on the native Android app. This provides space for the
    3-button system navigation bar.
  */
  .native-android .pb-safe {
    padding-bottom: 3rem; /* 48px, increased padding for Android navigation bar */
  }

  #orientation-lock-overlay {
    @apply fixed inset-0 z-[100] bg-gray-900 text-white flex-col items-center justify-center text-center p-8 hidden; /* hidden by default */
  }

  /* New styles for the improved overlay */
  .phone-graphic {
    @apply relative w-24 h-48;
    animation: rotate-hint 3s ease-in-out infinite;
  }
  
  .phone-outline, .stoutly-logo {
    @apply absolute top-0 left-0 w-full h-full;
  }

  .stoutly-logo {
    @apply p-6; /* Add padding to fit the logo nicely inside the phone */
  }

  @keyframes rotate-hint {
    0% { transform: rotate(90deg); }
    30% { transform: rotate(0deg); }
    70% { transform: rotate(0deg); }
    100% { transform: rotate(90deg); }
  }
}

/* Show overlay and hide app only on mobile devices in landscape.
   We use max-height as a proxy for a phone, as a phone's height in landscape
   is much smaller than its width, and smaller than a tablet's height. */
@media (orientation: landscape) and (max-height: 600px) {
  #root, #modal-root {
    display: none; /* Hide the app content */
  }
  #orientation-lock-overlay {
    display: flex; /* Show the overlay */
  }
}

.map-tiles-dark {
  filter: brightness(1.4) contrast(0.9) saturate(0.9);
}

@keyframes highlight {
  0% { background-color: rgba(251, 191, 36, 0); } /* amber-400 */
  50% { background-color: rgba(251, 191, 36, 0.3); }
  100% { background-color: rgba(251, 191, 36, 0); }
}

.highlight-rating {
  animation: highlight 2.5s ease-in-out;
}

.highlight-comment {
  animation: highlight 2.5s ease-in-out;
}

@keyframes shrink-width {
  from { width: 100%; }
  to { width: 0%; }
}

.progress-bar-animate {
  animation: shrink-width linear forwards;
}